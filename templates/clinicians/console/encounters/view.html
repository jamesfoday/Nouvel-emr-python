{% extends "base.html" %}
{% block content %}
<div class="mx-auto mt-6 w-full max-w-5xl px-3 sm:px-6">
  <!-- Glassy shell -->
  <div class="rounded-3xl bg-[#CFE8D6]/70 p-1 overflow-hidden">
    <div class="rounded-3xl bg-white/70 backdrop-blur p-5 sm:p-7 shadow-xl overflow-hidden">

      <!-- Header -->
      <div class="mb-5 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
        <div class="min-w-0">
          <h1 class="text-xl font-semibold text-gray-900 truncate">
            {{ enc.patient.full_name }}
          </h1>
          <p class="text-sm text-gray-600">
            {{ enc.start|date:"d M Y, H:i" }} · {{ enc.get_status_display }}{% if enc.location %} · {{ enc.location }}{% endif %}
          </p>
        </div>

        <div class="flex items-center gap-3 shrink-0">
          <a href="{% url 'encounters_ui:close' pk=enc.clinician_id eid=enc.pk %}"
             class="rounded-full bg-gray-900 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:brightness-95
                    {% if enc.status == 'closed' %}opacity-50 pointer-events-none{% endif %}">
            Close encounter
          </a>
          <a href="{% url 'encounters_ui:list' pk=enc.clinician_id %}"
             class="inline-flex items-center gap-2 rounded-full bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:brightness-95">
            Back
          </a>
        </div>
      </div>

      <!-- Body -->
      <div class="grid gap-6 md:grid-cols-2 max-w-full">
        <!-- Vitals card wrapper -->
        <div class="rounded-3xl bg-[#EEF7F0] p-4 ring-1 ring-black/5 max-w-full overflow-hidden min-w-0">
          {% include "clinicians/console/encounters/_vitals.html" with enc=enc vitals=vitals %}
        </div>

        <!-- Notes card wrapper -->
        <div class="rounded-3xl bg-[#EEF7F0] p-4 ring-1 ring-black/5 max-w-full overflow-hidden min-w-0">
          {% include "clinicians/console/encounters/_notes.html" with enc=enc notes=notes %}
        </div>
      </div>

    </div>
  </div>
</div>
{% endblock %}
