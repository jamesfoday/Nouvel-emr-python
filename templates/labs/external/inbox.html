{% extends "base.html" %}
{% block content %}
<div class="mx-auto mt-6 w-full max-w-5xl px-3 sm:px-6">
  <div class="rounded-[28px] bg-emerald-50/30 ring-1 ring-white/20 shadow-xl backdrop-blur-lg p-3 sm:p-4">
    <div class="rounded-2xl border border-white/30 bg-white/60 p-4 sm:p-6 shadow-xl backdrop-blur">
      <div class="mb-4 flex items-center justify-between">
        <h1 class="text-lg sm:text-xl font-semibold text-gray-900">External Results</h1>
        <a href="{% url 'labs_ui:lab_index' clinician.pk %}"
           class="rounded-xl bg-gray-900/90 px-3 py-1.5 text-sm font-semibold text-white">Back</a>
      </div>

      <ul class="space-y-2">
        {% for er in items %}
          <li class="rounded-2xl border border-white/30 bg-white/70 p-3 sm:p-4 shadow-xl backdrop-blur flex items-center justify-between">
            <div class="min-w-0">
              <div class="font-medium text-gray-900 truncate">{{ er.title|default:"External result" }}</div>
              <div class="text-sm text-gray-600">
                {{ er.patient.get_full_name|default:er.patient }} · {{ er.vendor_name|default:"External" }}
                {% if er.performed_at %} · {{ er.performed_at|date:"M j, Y" }}{% endif %} · {{ er.status|title }}
              </div>
            </div>
            <button
              class="rounded-xl bg-emerald-600 px-3 py-1.5 text-sm font-semibold text-white hover:brightness-95"
              hx-get="{% url 'labs_ui:external_result_review' clinician.pk er.id %}"
              hx-target="#modal-root"
              hx-swap="innerHTML">
              Review
            </button>
          </li>
        {% empty %}
          <div class="px-4 py-14 text-center text-gray-500">No external results.</div>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>
{% endblock %}
