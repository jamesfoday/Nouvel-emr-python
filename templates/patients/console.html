{% extends "base.html" %}

{% block title %}Patients · Nouvel Console{% endblock %}

{% block content %}
<section class="container" style="margin-top: var(--space-6);">
  <div class="card">

    <!-- Search -->
    <form class="searchbar"
          hx-get="/console/patients/search"
          hx-target="#results"
          hx-trigger="keyup changed delay:300ms, submit"
          hx-indicator="#busy-indicator">
      <input class="search-input"
             type="search"
             name="q"
             placeholder="Search patients by name, email, phone, or external ID…"
             aria-label="Search patients"
             autofocus />
      <button type="submit" class="icon-btn" aria-label="Search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M21 21l-4.35-4.35M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15z"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </form>

    <!-- Results table -->
    <div id="results"
         class="card"
         hx-get="/console/patients/search"
         hx-trigger="load"
         hx-indicator="#busy-indicator">
      <!-- HTMX injects the table here on load and on search -->
      <div class="muted" style="padding: var(--space-4);">Type to search patients…</div>
    </div>

  </div>
</section>

<!-- Modal root already provided in base.html (#modal) -->
{% endblock %}
