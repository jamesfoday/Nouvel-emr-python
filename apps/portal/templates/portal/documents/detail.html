{% extends "portal/base.html" %}
{% load static %}
{% block title %}Document · Nouvel{% endblock %}

{% block content %}
<div class="py-10">
  <div class="mx-auto w-full max-w-3xl px-4">
    <article class="rounded-3xl border border-white/30 bg-white/60 p-6 shadow-xl backdrop-blur">
      <header class="flex items-start justify-between gap-4">
        <div>
          <h1 class="text-xl font-semibold">{{ doc.title|default:doc.filename|default:"Document" }}</h1>
          <p class="mt-1 text-sm text-gray-600">
            {% if doc.created_at %}{{ doc.created_at|date:"D, M j Y" }} · {{ doc.created_at|time:"H:i" }}{% endif %}
            {% if doc.kind %} · {{ doc.kind|title }}{% endif %}
          </p>
        </div>
        {% if doc.file %}
          <a href="{% url 'portal_ui:doc_download' doc.id %}"
             class="rounded-xl bg-gray-900 px-3 py-1.5 text-sm font-semibold text-white hover:bg-gray-800">
            Download
          </a>
        {% endif %}
      </header>

      <hr class="my-4 border-white/40">

      {% if doc.file and doc.file.url %}
        {% if doc.file.url|lower|endswith:".pdf" %}
          <iframe src="{{ doc.file.url }}" class="w-full h-[70vh] rounded-xl border border-white/40 bg-white"></iframe>
        {% else %}
          <div class="rounded-2xl bg-emerald-50/50 p-4 text-sm text-gray-700">
            This file can be downloaded using the button above.
          </div>
        {% endif %}
      {% else %}
        <div class="rounded-2xl bg-emerald-50/50 p-4 text-sm text-gray-700">No file attached.</div>
      {% endif %}
    </article>
  </div>
</div>
{% endblock %}
